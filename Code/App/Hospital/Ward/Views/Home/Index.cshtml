@{
    ViewBag.Title = "Ward Page";
}

<main id="patient-personal-data-content" class="container">

    <div data-bind="template: { name: 'news-template'}"></div>

</main>


<div class="container">
    <ul id="discussion"></ul>
</div>

<script id="news-template" type="text/html">
    <ul id="discussion"></ul>
</script>

@section scripts {
<script src="~/Scripts/App/Model/PersonalData/PatientsPersonalDataViewModel.js"></script>
<!--Script references. -->
<!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
<!--Reference the SignalR library. -->
<script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
<!--Reference the autogenerated SignalR hub script. -->
<script src="~/signalr/hubs"></script>
    <script>
        $(function () {
            // Reference the auto-generated proxy for the hub.
            var chat = $.connection.wardHub;
            // Create a function that the hub can call back to display messages.
            chat.client.addNewMessageToPage = function (idP, idD, date, desc) {
                // Add the message to the page.
                $('#discussion').append('<li><strong>ID (Pacient) : </strong>' + htmlEncode(idP)+'<strong>ID (Diesease) : </strong>' + htmlEncode(idD)
                    + '<strong> DATE : </strong>' + htmlEncode(date) + '<strong> DESCRIPTION : </strong>' + htmlEncode(desc) + '</li>');

                var element = document.createElement("button");
                element.appendChild(document.createTextNode("RTG"));
                element.onclick = (function () {
                    alert(date);//just test alert
                });
                $('#discussion').append(element);
            };
            $.connection.hub.start().done(function () {
            });
        });
        // This optional function html-encodes messages for display in the page.
        function htmlEncode(value) {
            var encodedValue = $('<div />').text(value).html();
            return encodedValue;
        }
</script>
}